general:
    folder_output: outputs_aerostruct
    fname_output: blade_out
optimization_variables:
  blade:
    aero_shape:
      twist:
        flag: True  # Flag to optimize the twist
        inverse: False # Flag to determine twist from the user-defined desired margin to stall (defined in constraints)
        n_opt: 8     # Number of control points along blade span
        lower_bound: [0.3490658503988659, 0.08726646259971647, 0.08726646259971647, 0., -0.08726646259971647, -0.08726646259971647, -0.08726646259971647, -0.08726646259971647]          # Lower bounds for the twist in [rad] at the n_opt locations
        upper_bound: [0.4363323129985824, 0.3490658503988659, 0.3490658503988659, 0.2617993877991494, 0.2617993877991494, 0.17453292519943295, 0.17453292519943295, 0.08726646259971647] # Upper bounds for the twist in [rad] at the n_opt locations
      chord:
        flag: True     # Flag to optimize the chord
        n_opt: 8        # Number of control points along blade span
        min_gain: 0.7   # Nondimensional lower bound at the n_opt locations
        max_gain: 1.3   # Nondimensional upper bound at the n_opt locations
      af_positions:
        flag: False     # Flag to optimize the airfoil positions
        af_start: 4     # Index of the first airfoil from blade root that can have the location optimized. First airfoil is number 0. Last airfoil is always locked at blade tip.
    structure:
      spar_cap_ss:
        flag: True     # Flag to optimize the spar cap thickness on the suction side
        name: Spar_cap_ss # Name in the yaml of the spar cap laminate on the suction side
        n_opt: 8        # Number of control points along blade span
        min_gain: 0.7   # Nondimensional lower bound at the n_opt locations
        max_gain: 1.3   # Nondimensional upper bound at the n_opt locations
      spar_cap_ps:
        flag: True     # Flag to optimize the spar cap thickness on the pressure side
        name: Spar_cap_ps # Name in the yaml of the spar cap laminate on the pressure side
        equal_to_suction: True # Flag to impose the spar cap thickness on pressure and suction sides equal
        n_opt: 8        # Number of control points along blade span
        min_gain: 0.7   # Nondimensional lower bound at the n_opt locations
        max_gain: 1.3   # Nondimensional upper bound at the n_opt locations
      te_ss:
        flag: False     # Flag to optimize the trailing edge reinforcement thickness on the suction side
        name: TE_reinforcement # Name in the yaml of the trailing edge reinforcement laminate on the suction side
        n_opt: 8        # Number of control points along blade span
        min_gain: 0.2   # Nondimensional lower bound at the n_opt locations
        max_gain: 2.0   # Nondimensional upper bound at the n_opt locations
      te_ps:
        flag: False     # Flag to optimize the trailing edge reinforcement thickness on the pressure side
        name: TE_reinforcement # Name in the yaml of the trailing edge reinforcement laminate on the pressure side
        n_opt: 8        # Number of control points along blade span
        min_gain: 0.2   # Nondimensional lower bound at the n_opt locations
        max_gain: 2.0   # Nondimensional upper bound at the n_opt locations
  control:
    tsr:
      flag: False     # Flag to optimize the rotor tip speed ratio
      min_gain: 0.9   # Nondimensional lower bound
      max_gain: 1.1   # Nondimensional upper bound

  tower:
    outer_diameter:
      flag: False
      lower_bound: 3.87
      upper_bound: 10.0
    layer_thickness:
      flag: False
      lower_bound: 4e-3
      upper_bound: 2e-1

merit_figure: LCOE  # Merit figure of the optimization problem. The options are 'AEP' - 'LCOE' - 'Cp' - 'blade_mass' - 'blade_tip_deflection'

constraints:
  blade:
    strains_spar_cap_ss:
      flag: True     # Flag to impose constraints on maximum strains (absolute value) in the spar cap on the blade suction side
      max:  3500.e-6  # Value of maximum strains [-]
    strains_spar_cap_ps:
      flag: True     # Flag to impose constraints on maximum strains (absolute value) in the spar cap on the blade pressure side
      max:  3500.e-6  # Value of maximum strains [-]
    tip_deflection:
      flag: True     # Constraint that maximum tip deflection cannot exceed 70% of tower clearance. Only for upwind rotors
      ratio: 1.0
    rail_transport:
      flag: False
      8_axle: False
      4_axle: False
    stall:
      flag: True     # Constraint on minimum stall margin
      margin: 0.087 # Value of minimum stall margin in [rad]
    chord:
      flag: False # Constraint on maximum chord
      max: 4.75   # Value of maximum chord in [m]
    frequency:
      flap_above_3P: False
      edge_above_3P: False
      flap_below_3P: False
      edge_below_3P: False
    moment_coefficient:
      flag: False
      max: 0.15 #0.16333
      min: 0.13
    match_cl_cd:
      flag_cl: False
      flag_cd: False
      filename: /path2file.txt
    match_L_D:
      flag_L: False
      flag_D: False
      filename: /path2file.txt
  tower:
    height_constraint:
      flag: False
      lower_bound: 1.e-2
      upper_bound: 1.e-2
    stress:
      flag: False
    global_buckling:
      flag: False
    shell_buckling:
      flag: False
    constr_d_to_t:
      flag: False
    constr_taper:
      flag: False
    slope:
      flag: False
    frequency_1:
      flag: False
      lower_bound: 0.13
      upper_bound: 0.40

driver:
    tol: 1.e-5            # Optimality tolerance
    #max_major_iter: 10    # Maximum number of major design iterations
    #max_minor_iter: 100   # Maximum number of minor design iterations
    max_iter: 5   # Maximum number of minor design iterations
    solver: SLSQP         # Optimization solver. Other options are 'SLSQP' - 'CONMIN'
    step_size: 1.e-3      # Step size for finite differencing
    form: forward         # Finite differencing mode, either forward or central


recorder:
    flag: True              # Flag to activate OpenMDAO recorder
    file_name: log_opt.sql  # Name of OpenMDAO recorder
